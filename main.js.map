{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/environments/environment.ts","./src/main.ts","zlib (ignored)","fs (ignored)","http (ignored)","https (ignored)","webpack:///fs (ignored)?de50","stream (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, HostListener, ViewChild } from '@angular/core';\r\nimport { version } from '../../package.json';\r\nimport * as PDFJS from 'pdfjs-dist/build/pdf';\r\nimport * as Tesseract from 'tesseract.js';\r\n//import * as XLSX from 'xlsx';\r\nimport * as XLSX from 'xlsx-js-style';\r\nimport { BrowserBarcodeReader } from '@zxing/library';\r\nimport { PdfViewerComponent } from 'ng2-pdf-viewer';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n    @HostListener('dblclick', ['$event']) onDblClick() { console.log(this); }\r\n    @ViewChild('pdfViewer', {static:true}) private pdfViewer:PdfViewerComponent;\r\n\r\n    public version:string = version;\r\n\r\n    private barcodeReader = new BrowserBarcodeReader();\r\n    public isReady:boolean = false;\r\n    public loading:boolean = true;\r\n\r\n    public pdfSrc = \"\";\r\n    public jobs:any[] = [];\r\n    public selectFileInput:HTMLInputElement = (()=>{\r\n        let input:HTMLInputElement = document.createElement('input');\r\n        input.type = 'file';\r\n        input.multiple = true;\r\n        input.accept = 'application/pdf';\r\n        input.addEventListener(\"change\", (event)=>{\r\n            if (!this.loading && event.target && event.target['files'] && event.target['files'].length>0) this.loadPdfFiles(event.target['files']);\r\n        });\r\n        return input;\r\n    })();\r\n\r\n    public lastExcel:any = null;\r\n\r\n    private tessWorker:Tesseract.Worker = Tesseract.createWorker({\r\n        //gzip: false,\r\n        workerPath: \"./assets/tesseract.worker.min.js\",\r\n        corePath: \"./assets/tesseract-core.wasm.js\",\r\n        langPath: \"./assets/tesseractLang\",\r\n        //logger: m => console.log(m),\r\n    });\r\n    \r\n    //Dragover listener\r\n    @HostListener('dragover', ['$event']) onDragOver(evt):void {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n    }\r\n    //Dragleave listener\r\n    @HostListener('dragleave', ['$event']) public onDragLeave(evt):void {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n    }\r\n    //Drop listener\r\n    @HostListener('drop', ['$event']) public ondrop(evt) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        //console.log(evt.dataTransfer.files);\r\n        if (!this.loading && evt.dataTransfer.files.length>0) this.loadPdfFiles(evt.dataTransfer.files);\r\n    }\r\n\r\n    constructor() {\r\n        window.document.title = \"GetInvInfo v.\" + version;\r\n        window.addEventListener(\"dragover\", e => e && e.preventDefault(), false);\r\n        window.addEventListener(\"drop\", e => e && e.preventDefault(), false);\r\n\r\n        let initFn:Function = ()=>{\r\n            this.initTessWorker().then(()=>{\r\n                this.isReady = true;\r\n                this.loading = false;\r\n            });\r\n        };\r\n\r\n        // Check if need to delete browser indexedDb or not.\r\n        let delDbKey:number = 1583513841733;\r\n        let delDbCheck:string = localStorage.getItem('delDb' + delDbKey);\r\n        if (!delDbCheck) {\r\n            let delDbReq:IDBOpenDBRequest = indexedDB.deleteDatabase('keyval-store');\r\n            delDbReq.onsuccess = ()=>{\r\n                localStorage.setItem('delDb' + delDbKey, '1');\r\n                initFn();\r\n            };\r\n            delDbReq.onerror = ()=>initFn();\r\n            delDbReq.onblocked = ()=>initFn();\r\n        } else {\r\n            initFn();\r\n        }\r\n\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public initTessWorker():Promise<any> {\r\n        return this.tessWorker.load()\r\n        //.then(ConfigResult=>this.tessWorker.loadLanguage('chi_tra'))\r\n        //.then(()=>this.tessWorker.initialize('chi_tra'));\r\n        .then(ConfigResult=>this.tessWorker.loadLanguage('eng'))\r\n        .then(()=>this.tessWorker.initialize('eng'));\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    \r\n    public loadPdfFiles(files:FileList):void {\r\n        if (this.loading) return;\r\n        this.loading = true;\r\n        this.jobs.splice(0, this.jobs.length);\r\n        for (let i=0; i<files.length; i++) {\r\n            //this.files.push(evt.dataTransfer.files[i]);\r\n            if (files[i].type==\"application/pdf\") {\r\n                this.jobs.push({\r\n                    file: files[i],\r\n                    status: 'pending', //pending, processing, finished\r\n                    results: [],\r\n                    message: \"\",\r\n                    error: \"\"\r\n                });\r\n            }\r\n        }\r\n        if (this.jobs.length>0) {\r\n            this.checkAndOpenPdf();\r\n        } else {\r\n            this.loading = false;\r\n        }\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public markJobAsFinished(job:any):void {\r\n        job.status = 'finished';\r\n        this.checkAndOpenPdf();\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public checkAndOpenPdf():void {\r\n        let pendingJobs:any[] = this.jobs.filter(job=>job.status=='pending');\r\n        if (pendingJobs.length>0) {\r\n            let job:any = pendingJobs.shift();\r\n            job.status = 'processing';\r\n            if (!environment.production && job.file && job.file.name) console.log('Filename: ' + job.file.name);\r\n            let reader = new FileReader();\r\n\r\n            reader.onload = (e:any)=>{\r\n                this.readPdf(reader.result as ArrayBuffer, 4000)\r\n                .then((canvas:HTMLCanvasElement)=>this.resizeImage(canvas, 4000))\r\n                .then((resized_canvas)=>this.recognizeBarcode(resized_canvas, 4000))\r\n                .then((result:any)=>{\r\n                    if (result.value.trim()) {\r\n                        job.results.push(result);\r\n                    } else {\r\n                        job.error = \"Cannot recognize order number. The PDF may not in correct format.\";\r\n                        this.markJobAsFinished(job);\r\n                        throw (job.error);\r\n                    };\r\n                })\r\n                .then(()=>this.readPdf(reader.result as ArrayBuffer, 1860))\r\n                .then((canvas:HTMLCanvasElement)=>this.resizeImage(canvas, 1860))\r\n                .then((resized_canvas)=>this.recognizeNumbers(resized_canvas, 1860))\r\n                .then((results:any[])=>results.map(result=>job.results.push(result)))\r\n                .then(()=>{\r\n                    job.message = job.results.map(item=>item.title+':'+item.value).join(', ');\r\n                    this.markJobAsFinished(job);\r\n                })\r\n                .catch((err)=>{\r\n                    console.log(err);\r\n                });\r\n            };\r\n\r\n            //reader.onload = (e:any)=>this.pdfSrc=e.target.result;\r\n            reader.readAsArrayBuffer(job.file);\r\n        } else {\r\n            this.exportAsExcelFile();\r\n        }\r\n    }\r\n    //-------------------------------------------------------------------------------------------------\r\n    private readPdfNg2PdfViewer(file:any, targetWidth:number=4000):Promise<HTMLCanvasElement> {\r\n        return new Promise((resolve, reject)=>{\r\n            this.pdfViewer.pageRendered.subscribe((data:any)=>{\r\n                if (data.pageNumber == 1) {\r\n                    let canvas:HTMLCanvasElement = document.getElementsByTagName('canvas')[0];\r\n                    resolve(canvas);\r\n                }\r\n            });\r\n            this.pdfSrc=file;\r\n        });\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    private readPdf(file:ArrayBuffer, targetWidth:number=4000):Promise<HTMLCanvasElement> {\r\n        return new Promise((resolve, reject)=>{\r\n            PDFJS.GlobalWorkerOptions.workerSrc = './assets/pdf.worker.js';\r\n            var loadingTask = PDFJS.getDocument(file);\r\n            loadingTask.promise.then((pdf)=>{\r\n                pdf.getPage(1).then((page)=>{\r\n                    var viewport:any = page.getViewport({ scale: 1 });\r\n                    //console.log('Original PDF width: ' + viewport.width + ', height: ' + viewport.height);\r\n                    let scale:number = targetWidth / viewport.width\r\n                    //console.log('Open PDF to Scale: ' + scale);\r\n                    viewport = page.getViewport({ scale: scale });\r\n    \r\n                    var canvas:HTMLCanvasElement = document.createElement('canvas');\r\n                    var context:CanvasRenderingContext2D = canvas.getContext('2d');\r\n                    //context.imageSmoothingEnabled = false;\r\n                    //context.imageSmoothingQuality = 'low';\r\n                    canvas.width = viewport.width\r\n                    canvas.height = viewport.height;\r\n                    //console.log('Opened PDF width: ' + canvas.width + ', height: ' + canvas.height);\r\n                    let renderTask = page.render({ canvasContext: context, viewport: viewport, });\r\n                    renderTask.promise.then(()=>{\r\n                        resolve(canvas);\r\n                    });\r\n                });\r\n            });\r\n\r\n        });\r\n    \r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public resizeImage(canvas:HTMLCanvasElement, targetWidth:number = 4000):Promise<HTMLCanvasElement> {\r\n        return new Promise((resolve, reject)=>{\r\n            try {\r\n                let resized_canvas:HTMLCanvasElement = document.createElement('canvas');\r\n                resized_canvas.width = targetWidth;\r\n                resized_canvas.height = canvas.height / canvas.width * resized_canvas.width;\r\n                resized_canvas.getContext('2d').drawImage(canvas, 0, 0, resized_canvas.width, resized_canvas.height);\r\n                //console.log(resized_canvas.toDataURL());\r\n                resolve(resized_canvas);\r\n            } catch (err) {\r\n                reject (err);\r\n            }\r\n        });\r\n    }\r\n    private resizeImg(imageString:string):Promise<string> {\r\n        return new Promise((resolve, reject)=>{\r\n            let tempImg:HTMLImageElement = document.createElement('img');\r\n            tempImg.onload = ()=>{\r\n                //console.log(tempImg);\r\n                let canvas:HTMLCanvasElement = document.createElement(\"canvas\");\r\n                canvas.width = tempImg.width / 2;\r\n                canvas.height = tempImg.height / tempImg.width * canvas.width;\r\n                canvas.getContext(\"2d\").drawImage(tempImg, 0, 0, canvas.width, canvas.height);\r\n                resolve(canvas.toDataURL(\"image/png\"));\r\n            }\r\n            tempImg.src = imageString;\r\n        });\r\n    };\r\n    //---------------------------------------------------------------------------------------------\r\n    private recognizeBarcode(canvas:HTMLCanvasElement, targetWidth:number=4000):Promise<any> {\r\n        return new Promise((resolve, reject)=>{\r\n                \r\n            let captureConfig:any = {\r\n                title:'報單號碼',\r\n                pos:[505, 61, 278, 24],\r\n                blackUnder:127\r\n            };\r\n            \r\n            let left = captureConfig.pos[0] * targetWidth / 1000;\r\n            let top = captureConfig.pos[1] * targetWidth / 1000;\r\n            let width = captureConfig.pos[2] * targetWidth / 1000;\r\n            let height = captureConfig.pos[3] * targetWidth / 1000;\r\n\r\n            let cropCanvas:HTMLCanvasElement = document.createElement('canvas');\r\n            cropCanvas.width = width;\r\n            cropCanvas.height = height;\r\n            let cropCanvas2D:CanvasRenderingContext2D = cropCanvas.getContext('2d');\r\n            //cropCanvas2D.imageSmoothingEnabled = false;\r\n            //cropCanvas2D.imageSmoothingQuality = 'low';\r\n            cropCanvas2D.drawImage(canvas, left, top, width, height, 0, 0, width, height);\r\n\r\n            let imageDataObj:any = cropCanvas2D.getImageData(0, 0, width, height);\r\n\r\n            let imageData:Uint8ClampedArray = imageDataObj.data;\r\n            //console.log(imageDataObj);\r\n            for (let i=0; i<imageData.length; i+=4) {\r\n                let avg:number = (imageData[i] + imageData[i+1] + imageData[i+2]) / 3;\r\n                avg = (avg < captureConfig.blackUnder) ? 0 : 255;\r\n                imageData[i] = avg;\r\n                imageData[i+1] = avg;\r\n                imageData[i+2] = avg;\r\n            }\r\n            cropCanvas2D.putImageData(imageDataObj, 0, 0);\r\n\r\n            let image = cropCanvas.toDataURL(\"image/png\");\r\n                \r\n            this.barcodeReader.decodeFromImage(undefined, image).then((result:any)=>{\r\n                resolve({ title:captureConfig.title, value:result.text.replace(/ /g,'') });\r\n            }).catch((err:string)=>{\r\n                resolve({ title:captureConfig.title, value:'' });\r\n            });\r\n            \r\n        });\r\n\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    private recognizeNumbers(canvas:HTMLCanvasElement, targetWidth:number=2000):Promise<any[]> {\r\n        return new Promise((resolve, reject)=>{\r\n                \r\n            let num2d:Function = (input:string):string=>{\r\n                let num:string = (input.toString().match(/\\d+/g) || []).join('');\r\n                while (num.length<3) num = \"0\" + num;\r\n                return [num.slice(0, num.length-2), '.', num.slice(num.length-2)].join('');\r\n            }\r\n\r\n            let captureConfig:any = [\r\n                { processType:'ocr', title:'分提單號碼', pos:[480, 145, 188, 20], blackUnder:127, charWhitelist:'0123456789.' },\r\n                { processType:'ocr', title:'離岸價格', pos:[850, 153, 121, 20], blackUnder:127, charWhitelist:'0123456789', postFn:[num2d] },\r\n                { processType:'ocr', title:'運費', pos:[850, 178, 121, 20], blackUnder:127, charWhitelist:'0123456789', postFn:[num2d] },\r\n                { processType:'ocr', title:'保險費', pos:[850, 211, 121, 20], blackUnder:127, charWhitelist:'0123456789', postFn:[num2d] },\r\n                { processType:'ocr', title:'起岸價格', pos:[850, 289, 121, 20], blackUnder:127, charWhitelist:'0123456789', postFn:[num2d] },\r\n                { processType:'ocr', title:'進口稅', pos:[854, 988, 121, 20], blackUnder:127, charWhitelist:'0123456789', isInBottomTable:true },\r\n                { processType:'ocr', title:'營業稅', pos:[858, 1112, 121, 20], blackUnder:127, charWhitelist:'0123456789', isInBottomTable:true },\r\n                { processType:'ocr', title:'匯率', pos:[890, 110, 80, 20], blackUnder:127, charWhitelist:'0123456789.', },\r\n                { processType:'ocr', title:'應加費用', pos:[850, 242, 121, 20], blackUnder:127, charWhitelist:'0123456789', postFn:[num2d] },\r\n                { processType:'ocr', title:'應減費用', pos:[850, 266, 121, 20], blackUnder:127, charWhitelist:'0123456789', postFn:[num2d] },\r\n                { processType:'ocr', title:'推廣貿易服務費', pos:[853, 1013, 121, 20], blackUnder:127, charWhitelist:'0123456789', isInBottomTable:true },\r\n            ];\r\n            \r\n            const bottomTableOffsetTop:number = this.getBottomTableOffsetTop(canvas);\r\n            if (bottomTableOffsetTop) console.log('+++ bottomTableOffsetTop: ' + bottomTableOffsetTop);\r\n\r\n            let configIndex:number = 0;\r\n            let tempResults:any[] = [];\r\n            \r\n            let loopFun:Function = (config:any, trial:number=0)=>{\r\n                let offset = [0, -1, 1][trial];\r\n                let left = config.pos[0] * targetWidth / 1000;\r\n                let top = (config.pos[1] + offset) * targetWidth / 1000;\r\n                let width = config.pos[2] * targetWidth / 1000;\r\n                let height = config.pos[3] * targetWidth / 1000;\r\n                if (config.isInBottomTable) top += bottomTableOffsetTop;\r\n\r\n                let cropCanvas:HTMLCanvasElement = document.createElement('canvas');\r\n                cropCanvas.width = width;\r\n                cropCanvas.height = height;\r\n                \r\n                let cropCanvas2D:CanvasRenderingContext2D = cropCanvas.getContext('2d');\r\n                //cropCanvas2D.imageSmoothingEnabled = false;\r\n                //cropCanvas2D.imageSmoothingQuality = 'low';\r\n                cropCanvas2D.drawImage(canvas, left, top, width, height, 0, 0, width, height);\r\n\r\n                //黑白處理\r\n                //OCR時效果會變差，所以comment掉\r\n                /*let imageDataObj:any = cropCanvas2D.getImageData(0, 0, width, height);\r\n                if (config.blackUnder) {\r\n                    let imageData:Uint8ClampedArray = imageDataObj.data;\r\n                    //console.log(imageDataObj);\r\n                    for (let i=0; i<imageData.length; i+=4) {\r\n                        let avg:number = (imageData[i] + imageData[i+1] + imageData[i+2]) / 3;\r\n                        avg = (avg < config.blackUnder) ? 0 : 255;\r\n                        imageData[i] = avg;\r\n                        imageData[i+1] = avg;\r\n                        imageData[i+2] = avg;\r\n                    }\r\n                    cropCanvas2D.putImageData(imageDataObj, 0, 0);\r\n                }*/\r\n\r\n                let image = cropCanvas.toDataURL(\"image/png\");\r\n                if (!environment.production) console.log('%c ', `background-repeat: no-repeat; padding: 10px 200px; background-image: url(${image})`);\r\n\r\n                this.tessWorker.setParameters({\r\n                    tessedit_pageseg_mode: Tesseract.PSM.SINGLE_LINE,\r\n                    tessedit_char_whitelist: config.charWhitelist,\r\n                });\r\n    \r\n                this.tessWorker.recognize(image).then((result:Tesseract.RecognizeResult)=>{\r\n                    //this.tessWorker.terminate(result.jobId);\r\n                    let regResult:string = result.data.text;\r\n                    if (!environment.production) console.log(result);\r\n\r\n                    if (config.postFn) for (let fn of config.postFn) regResult = fn(regResult);\r\n                    regResult = regResult.trim();\r\n                    if (!environment.production) console.log(config.title + \": \" + regResult);\r\n                    if (!regResult && trial<2) {\r\n                        loopFun(captureConfig[configIndex], trial+1);\r\n                    } else {\r\n                        tempResults.push({ title: config.title, value: regResult });\r\n                        if (configIndex<(captureConfig.length-1)) {\r\n                            configIndex++;\r\n                            loopFun(captureConfig[configIndex]);\r\n                        } else {\r\n                            resolve(tempResults);\r\n                        }\r\n                    }\r\n                });\r\n\r\n            }\r\n            \r\n            loopFun(captureConfig[configIndex]);\r\n\r\n        });\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    private getJobResultValueByTitle(job:any, title:string):string {\r\n        let results:any[] = job.results;\r\n        if (results.length<1) return '';\r\n        let foundResult:any = results.find((r:any)=>r.title==title);\r\n        if (!foundResult) return '';\r\n        return foundResult.value;\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public exportAsExcelFile(): void {\r\n        let defTitleStyle:any = {\r\n            alignment: { wrapText:true, vertical:\"top\", horizontal:\"center\" },\r\n            font: { bold:true, color:{rgb:\"FFFFFF\"} },\r\n            fill: { fgColor: {rgb:\"00B0F0\"} },\r\n            border: { top: { style: \"thin\", color: \"000000\" }, bottom: { style: \"thin\", color: \"000000\" }, left: { style: \"thin\", color: \"000000\" }, right: { style: \"thin\", color: \"000000\" } }\r\n        };\r\n        let defContentStyle:any = {\r\n            alignment: { wrapText:true, vertical:\"center\", horizontal:\"center\" },\r\n            font: { color:{rgb:\"000000\"} },\r\n            border: { top: { style: \"thin\", color: \"000000\" }, bottom: { style: \"thin\", color: \"000000\" }, left: { style: \"thin\", color: \"000000\" }, right: { style: \"thin\", color: \"000000\" } }\r\n        }\r\n        let exportConfig:any[] = [\r\n            {\r\n                excelTitle:\"Arvato Invoice#\",\r\n                getFn:(job)=>\"\",\r\n                col: {wch:21.43},\r\n                titleStyle: Object.assign({}, defTitleStyle, { fill: null, font: { bold:true, color:{rgb:\"000000\"} } })\r\n            }, {\r\n                excelTitle:\"報單號碼\\n(3)\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '報單號碼'),\r\n                col: {wch:32.43}\r\n            }, {\r\n                excelTitle:\"進口報單\\n(離岸價格)\\n(17)\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '離岸價格'),\r\n                col: {wch:21.57},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"運費\\nUSD\\n(18)\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '運費'),\r\n                col: {wch:21.57},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"保險費\\nUSD\\n(19)\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '保險費'),\r\n                col: {wch:21.57},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"應加減費用\\n(20, 21)\",\r\n                getFn:(job)=>{\r\n                    let valueA:string = this.getJobResultValueByTitle(job, '應加費用');\r\n                    let valueB:string = this.getJobResultValueByTitle(job, '應減費用');\r\n                    return (valueB!=\"0.00\") ? (\"-\" + valueB) : valueA;\r\n                },\r\n                col: {wch:21.57},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"進口報單\\n(起岸價格)\\n(22)\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '起岸價格'),\r\n                col: {wch:19.14},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"Waybill #\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '分提單號碼'),\r\n                col: {wch:18.57},\r\n                titleStyle: Object.assign({}, defTitleStyle, { font: { bold:true, color:{rgb:\"FF0000\"} }, fill: { fgColor: {rgb:\"CCFFCC\"} } })\r\n            }, {\r\n                excelTitle:\"CDS X-Rate\\n(16)\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '匯率'),\r\n                col: {wch:26.43},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.000\" })\r\n            }, {\r\n                excelTitle:\"進口稅\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '進口稅') + \".00\",\r\n                col: {wch:26.43},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"推廣貿易服務費\",\r\n                getFn:(job)=>{\r\n                    let value:string = this.getJobResultValueByTitle(job, '推廣貿易服務費');\r\n                    return (value==\"0\") ? \"0.00\" : value;\r\n                },\r\n                col: {wch:26.43},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }, {\r\n                excelTitle:\"營業稅\",\r\n                getFn:(job)=>this.getJobResultValueByTitle(job, '營業稅') + \".00\",\r\n                col: {wch:26.43},\r\n                contentStyle: Object.assign({}, defContentStyle, { numFmt: \"0.00\" })\r\n            }\r\n        ];\r\n\r\n        let datas:any[] = [];\r\n\r\n\r\n        for (let job of this.jobs) if (!job.error) {\r\n            let data:any = {};\r\n            exportConfig.map((config:any)=>data[config.excelTitle] = config.getFn(job));\r\n            datas.push(data);\r\n        }\r\n\r\n        const worksheet: XLSX.WorkSheet = XLSX.utils.json_to_sheet(datas);\r\n        const workbook: XLSX.WorkBook = { Sheets: { 'Month Year': worksheet }, SheetNames: ['Month Year'] };\r\n        if (!environment.production) console.log(worksheet);\r\n        worksheet['!cols'] = exportConfig.map((config:any)=>config.col);\r\n        //Title style\r\n        exportConfig.map((config:any, index:number)=>{\r\n            let key:string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'[index] + '1';\r\n            if (worksheet[key]) worksheet[key].s = config.titleStyle || defTitleStyle;\r\n        });\r\n        //Content style\r\n        exportConfig.map((config:any, i:number)=>{\r\n            datas.map((data:any, j)=>{\r\n                let key:string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'[i] + (j + 2).toString();\r\n                if (worksheet[key]) worksheet[key].s = config.contentStyle || defContentStyle;\r\n            })\r\n        });\r\n        \r\n        this.lastExcel = {\r\n            wb: workbook,\r\n            filename: 'getInvInfo_result_' + new  Date().getTime() + '.xlsx'\r\n        }\r\n        \r\n        this.loading = false;\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public downloadLastExcel():void {\r\n        //FileSaver.saveAs(this.lastExcel.blob, this.lastExcel.filename);\r\n        XLSX.writeFile(this.lastExcel.wb, this.lastExcel.filename);//, {bookSST: true, cellStyles: true});\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public getFinishedJobs():any[] {\r\n        return this.jobs.filter(job=>job.status=='finished');\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public saveCanvasAsImage(canvas, filename = 'output.png') {\r\n        const link = document.createElement('a');\r\n        link.download = filename;\r\n        link.href = canvas.toDataURL('image/png');  // 轉為 base64 PNG\r\n        link.click();  // 觸發下載\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    public getBottomTableOffsetTop(canvas:HTMLCanvasElement):number {\r\n        // Debug Use 儲存至PNG\r\n        // this.saveCanvasAsImage(canvas);\r\n\r\n        const scale:number = canvas.width / 930;\r\n        // console.log('scale:' + scale);\r\n        //starting point: 867, 875\r\n        const startX:number = 867 * scale;\r\n        const startY:number = 876 * scale;\r\n        const ctx = canvas.getContext('2d')!;\r\n        const imgData = ctx.getImageData(startX, startY, 1, Math.floor(25 * scale));\r\n\r\n        \r\n        if (!environment.production) { // Debug Use\r\n            // 將 canvas 裁剪成指定大小\r\n            const cropCanvas:HTMLCanvasElement = document.createElement('canvas');\r\n            cropCanvas.width = 1;\r\n            cropCanvas.height = Math.floor(25 * scale);\r\n            const cropCtx = cropCanvas.getContext('2d')!;\r\n            cropCtx.putImageData(imgData, 0, 0);\r\n            let image = cropCanvas.toDataURL(\"image/png\");\r\n            console.log(image);\r\n            console.log('%c ', `background-repeat: no-repeat; padding: 10px 200px; background-image: url(${image})`);\r\n        }\r\n\r\n        const data = imgData.data; // RGBA flat array\r\n        console.log(data);\r\n\r\n        let foundY:number = -1;\r\n        for (let y = 0; y < (data.length / 4); y++) {\r\n            const i = y * 4;\r\n            const r = data[i];\r\n            const g = data[i + 1];\r\n            const b = data[i + 2];\r\n            const brightness = (r + g + b) / 3;\r\n\r\n            if (brightness < 100) {\r\n                foundY = y;\r\n                console.log('找到邊線於 Y =', foundY);\r\n                break;\r\n            }\r\n        }\r\n        if (foundY == -1) {\r\n            console.error('找不到邊線，請檢查圖片或參數設定。');\r\n            return 0;\r\n        };\r\n        //舊的format的黑線是在884 (scale:1)，找出來的Y值是15，所以返回的Y值是Y-15 = 0;\r\n        //新的format的黑線是在878 (scale:1)，找出來的Y值是5，所以返回的Y值是Y-15 = -10;\r\n        const result:number = foundY - 15;\r\n        console.log('返回offset結果:', result);\r\n        return result;\r\n        /*\r\n        舊:\r\n        分提單號碼:4464513174\r\n        找到邊線於 Y = 1767\r\n        bottomTableOffsetTop: -1\r\n        新:\r\n        分提單號碼:4464552190\r\n        找到邊線於 Y = 5\r\n        bottomTableOffsetTop: -3\r\n        */\r\n\r\n        // return foundY - (884 * scale);\r\n    }\r\n    //---------------------------------------------------------------------------------------------\r\n    //---------------------------------------------------------------------------------------------\r\n\r\n\r\n}\r\n","\r\n<div class=\"instruction\" *ngIf=\"isReady && !loading\">\r\n    <div >Drop PDF file into this window. Or <span class=\"btn openFile\" (click)=\"selectFileInput.click()\">Select Files</span>.</div>\r\n    <div class=\"downloadFile btn\" *ngIf=\"lastExcel\" (click)=\"downloadLastExcel()\">Download Last Result</div>\r\n</div>\r\n<div class=\"instruction progress\" *ngIf=\"isReady && loading\">\r\n    Porcessing... {{getFinishedJobs().length + 1}} of {{jobs.length}}\r\n    <progress [value]=\"getFinishedJobs().length\" [max]=\"jobs.length-1\"></progress>\r\n</div>\r\n\r\n<div class=\"jobBox\" *ngIf=\"isReady\">\r\n    <div class=\"message title\">\r\n        <span class=\"fileName\">Filename:</span>\r\n        <span class=\"content\">Result:</span>\r\n    </div>\r\n    <div class=\"messageContainer\">\r\n        <div class=\"message\" *ngFor=\"let job of jobs\">\r\n            <div class=\"fileName\">{{job.file.name}}</div>\r\n            <div class=\"content\" *ngIf=\"job.message\">{{job.message}}</div>\r\n            <div class=\"content error\" *ngIf=\"job.error\">{{job.error}}</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"version\">Version: {{version}}</div>\r\n\r\n<div class=\"loading\" *ngIf=\"loading\" (click)=\"$event.stopPropagation()\"></div>\r\n\r\n\r\n<pdf-viewer #pdfViewer [src]=\"pdfSrc\"></pdf-viewer>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { AppComponent } from './app.component';\r\nimport { PdfViewerModule } from 'ng2-pdf-viewer';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    PdfViewerModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":"webpack:///"}